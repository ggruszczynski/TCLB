<?xml version="1.0"?>
<CLBConfig version="2.0" output="output/allen_cahn_runr/">
	<Geometry nx="512" ny="512">
		<!-- <SRT_DF_SOI><Box/></SRT_DF_SOI> -->
		<!-- <SRT_M_SOI><Box/></SRT_M_SOI>	 -->
		<TRT_M_SOI><Box/></TRT_M_SOI>
		<!-- <TRT_CM_SOI><Box/></TRT_CM_SOI> -->
	</Geometry>
  <Model>
    <Param name="diffusivity_phi" value="0.0166666666"/>
    <Param name="magic_parameter" value="0.0833333333"/>
    <Param name="lambda" value="0.01"/>
    <Param name="Init_PhaseField" value="0.0"/>
    <Param name="Init_UX" value="0.0"/>
  </Model>
  <RunR><![CDATA[
        # Duel of two Gaussian Hills
        # to see the difference between first and second order integration of the source term

        D = 2 # no of dimensions
        C0 = 100 # initial concentration
        Sigma2 = 200 # initial variance
        phi0 = C0/(2*pi*Sigma2)^(D/3)
        

        x = Solver$Geometry$X
        y = Solver$Geometry$Y
        x = (x - 0.5)
        y = (y - 0.5)
        nx = dim(x)[1]
        ny = dim(x)[2]


        x_center = nx/2
        y_center = ny/2
        dx = x - x_center
        dy = y - y_center
        L = dx*dx + dy*dy
        phi_hill1 = phi0*exp(-L/(2*Sigma2))

        x_center = nx/4
        y_center = ny/4
        dx = x - x_center
        dy = y - y_center
        L = dx*dx + dy*dy
        phi_hill2 = -phi0*exp(-L/(2*Sigma2))

                           
        Solver$Fields$Init_PhaseField_External[] = phi_hill1 + phi_hill2 
        Solver$Actions$InitFromFields()
  
        ]]></RunR>
  <Solve Iterations="10000">
    <VTK Iterations="50"/>
  </Solve>
</CLBConfig>


<!--
run 
CLB/d2q9_AllenCahn_SourceTerm_SOI_NaiveQ/main example/reaction/d2q9_AllenCahn_SourceTerm_SOI_runr.xml 
against
CLB/d2q9_AllenCahn_SourceTerm_SOI/main example/reaction/d2q9_AllenCahn_SourceTerm_SOI_runr.xml
-->